<div th:fragment="songlist">
  <div th:if="${!#lists.isEmpty(songqueue)}"
       class="flex flex-col divide-y divide-[#282828]" id="song-list">

    <div th:each="song : ${songqueue}"
         class="flex items-center justify-between py-4 hover:bg-[#232323] px-3 rounded-lg transition">
      <div class="flex items-center gap-4">
        <!-- Album Art -->
        <img th:if="${song.albumArtUrl != null}" th:src="${song.albumArtUrl}" alt="Album Art"
             class="w-16 h-16 rounded-lg object-cover" />

        <div th:if="${song.albumArtUrl == null}" class="w-16 h-16 rounded-lg bg-[#2a2a2a] flex items-center justify-center">
          <span class="text-xs text-gray-400">No art</span>
        </div>

        <!-- Song Details -->
        <div class="flex flex-col">
          <h2 th:text="${song.getTitle()}" class="font-semibold">Song Title</h2>
          <p th:text="${song.getArtist()}" class="text-gray-400 text-sm">Artist Name</p>
        </div>
      </div>

      <!-- Voting Section -->
      <div class="flex items-center gap-3">
        <form th:action="@{/vote}" method="post" class="vote-form flex items-center gap-2">
          <input type="hidden" name="songId" th:value="${song.getId()}"/>
          <button type="submit" name="vote" value="up"
                  th:disabled="${userVotes[song.getId()] == 1}"
                  th:classappend="${userVotes[song.getId()] == 1} ? ' opacity-50 cursor-not-allowed' : ''"
                  class="text-[var(--spotify-green)] hover:scale-110 transition">▲</button>
        </form>

        <span class="vote-count text-lg font-semibold" th:text="${song.getVotes()}">0</span>

        <form th:action="@{/vote}" method="post" class="vote-form flex items-center gap-2">
          <input type="hidden" name="songId" th:value="${song.getId()}"/>
          <button type="submit" name="vote" value="down"
                  th:disabled="${userVotes[song.getId()] == -1}"
                  th:classappend="${userVotes[song.getId()] == -1} ? ' opacity-50 cursor-not-allowed' : ''"
                  class="text-red-500 hover:scale-110 transition">▼</button>
        </form>
      </div>
    </div>
  </div>

  <p th:if="${#lists.isEmpty(songqueue)}"
     class="text-center text-gray-500 italic py-4">
    No songs in queue yet. Add a playlist on the dashboard first!
  </p>
</div>